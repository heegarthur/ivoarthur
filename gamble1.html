<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dice Game</title>
    <style>
        body { font-family: Arial, sans-serif; }
        #result { font-size: 24px; margin-top: 20px; }
        #notification { color: red; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>Dice Game</h1>
    <button id="rollButton">Roll</button>
    <button id="bankButton">Transfer Points to Bank</button>
    <div id="result"></div>
    <div id="notification"></div>

    <script>
        // Initialize values
        let level = parseInt(sessionStorage.getItem('level'));
        let score = parseInt(sessionStorage.getItem('score')) || 0;
        let bank = parseInt(localStorage.getItem('bank')) || 0;

        if (bank == null) {
            localStorage.setItem('bank', 10);
        }

        // Update the UI
        function updateUI() {
            document.getElementById('result').innerText = `Level: ${level}, Score: ${score}, Bank: ${bank}`;
        }
        updateUI();

        // Function to display notifications
        function showNotification(message) {
            const notificationDiv = document.getElementById('notification');
            notificationDiv.innerText = message;
            setTimeout(() => {
                notificationDiv.innerText = ''; // Hide the notification after 3 seconds
            }, 3000);
        }

        document.getElementById('rollButton').addEventListener('click', () => {
            // Check if you have enough bank
            if (bank < 4) {
                showNotification("You don't have enough points in your bank to roll.");
                return;
            }

            // Confirmation for rolling
            if (!confirm("Are you sure you want to use 4 points from your bank to roll?")) {
                return; // Stop if the user doesn't confirm
            }

            // Pay for rolling
            bank -= 4;

            let interval;
            let currentNum = 0;

            interval = setInterval(() => {
                currentNum = Math.floor(Math.random() * (level)+1);
                document.getElementById('result').innerText = `Current Number: ${currentNum}`;
            }, 100);

            // Stop after a while with a random number
            setTimeout(() => {
                clearInterval(interval);

                document.getElementById('result').innerText = `Final Number: ${currentNum}`;

                if (currentNum == 3) {
                    score += 1; // Increase score
                    level += 1; // Increase level
                    document.getElementById("result").innerText = `Current number: 3`;
                    showNotification("Congratulations! You rolled a 3!");
                } else {
                    showNotification("Sorry, you didn't win.");
                }

                // Save the values in sessionStorage and localStorage
                sessionStorage.setItem('level', level);
                sessionStorage.setItem('score', score);
                localStorage.setItem('bank', bank);
                updateUI();
            }, 3000); // Rolling stops after 3 seconds
        });

        document.getElementById('bankButton').addEventListener('click', () => {
            if (score > 0) {
                bank += score; // Add score to bank
                score = 0; // Reset score
                level = 3; // Reset level
                showNotification("Points have been transferred to the bank!");
            } else {
                showNotification("You don't have any points to transfer.");
            }

            // Save the values in localStorage and sessionStorage
            localStorage.setItem('bank', bank);
            sessionStorage.setItem('score', score);
            sessionStorage.setItem('level', level);
            updateUI();
        });
    </script>
</body>
</html>
